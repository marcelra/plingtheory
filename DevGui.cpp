#include "DevGui.h"

#include "AvailablePlotsList.h"
#include "IPlotFactory.h"
#include "Logger.h"
#include "RegLargeDataCurve.h"
#include "StftAlgorithm.h"
#include "TestDataSupply.h"

#include <boost/thread.hpp>

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// execute
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void DevGui::execute()
{
   // devPlotFactory();
   devMakeALotOfPlots();
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// devPlotFactory
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void DevGui::devPlotFactory()
{
   RawPcmData::Ptr data = TestDataSupply::getCurrentTestSample();
   WaveAnalysis::StftAlgorithm stftAlg( data->getSamplingInfo() );
   WaveAnalysis::StftData::Ptr stft = stftAlg.execute( *data );

   gPlotFactory().createPlot( "STFT graph" );
   gPlotFactory().createStftGraph( *stft );
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// makeALotOfPlots
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void DevGui::devMakeALotOfPlots()
{
   for ( size_t i = 0; i < 200; ++i )
   {
      std::ostringstream plotTitle;
      plotTitle << "plot" << i;
      gPlotFactory().createPlot( plotTitle.str() );
      gPlotFactory().createGraph( realVector( 0, 1 ), realVector( i, i ) );

      boost::this_thread::sleep_for( boost::chrono::milliseconds( 50 ) );
   }
}
