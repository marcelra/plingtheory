#include "ProgramOptions.h"

#include <iostream>
#include <string>
#include <vector>

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// constructor
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
ProgramOptions::ProgramOptions( int argc, char* argv[] ) :
   m_hasErrors( false ),
   m_doProcessRootEvents( true )
{
   for ( int i = 1; i < argc; ++i )
   {
      std::string opt = argv[i];
      bool isParsed = false;
      if ( opt.find( "--" ) == 0 )
      {
         isParsed = parseOption( opt.substr( 2, opt.size() - 2 ) );
      }
      if ( !isParsed )
      {
         m_hasErrors = true;
      }
   }
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// hasErrors
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool ProgramOptions::hasErrors() const
{
   return m_hasErrors;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// parseOption
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool ProgramOptions::parseOption( const std::string& option )
{
   if ( option == "disableRoot" )
   {
      m_doProcessRootEvents = false;
      return true;
   }
   return false;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// doProcessRootEvents
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool ProgramOptions::doProcessRootEvents() const
{
   return m_doProcessRootEvents;
}
